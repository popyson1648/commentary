const CACHE_NAME="v0.1.0",addResourcesToCache=async e=>{const a=await caches.open("v0.1.0");await a.addAll(e)},putInCache=async(e,a)=>{const t=await caches.open("v0.1.0");await t.put(e,a)},cacheFirst=async({request:e,preloadResponsePromise:a,fallbackUrl:t})=>{const n=await caches.match(e);if(n)return n;const s=await a;if(s)return console.info("using preload response",s),putInCache(e,s.clone()),s;try{const a=await fetch(e);return putInCache(e,a.clone()),a}catch(e){const a=await caches.match(t);return a||new Response("Network error happened",{status:408,headers:{"Content-Type":"text/plain"}})}},enableNavigationPreload=async()=>{self.registration.navigationPreload&&await self.registration.navigationPreload.enable()};self.addEventListener("activate",(e=>{e.waitUntil(enableNavigationPreload())})),self.addEventListener("install",(e=>{e.waitUntil(addResourcesToCache(["/commentary/searchindex.js","/commentary/searchindex.json"]))})),self.addEventListener("fetch",(e=>{e.respondWith(cacheFirst({request:e.request,preloadResponsePromise:e.preloadResponse,fallbackUrl:"goal.webp"}))}));