"use strict";const rootPath=document.getElementById("searcher").dataset.pathtoroot;window.search=window.search||{},(e=>{if(!Mark||!elasticlunr)return;String.prototype.startsWith||(String.prototype.startsWith=(e,t)=>this.substr(!t||t<0?0:+t,e.length)===e);const t=document.getElementById("search-wrapper"),s=document.getElementById("searchbar"),r=document.getElementById("searchresults"),a=document.getElementById("searchresults-outer"),o=document.getElementById("searchresults-header"),n=document.getElementById("search-toggle"),l="search",c="highlight";let i=null,d=[],h={teaser_word_count:30,limit_results:30},u={bool:"AND",expand:!0,fields:{title:{boost:1},body:{boost:1},breadcrumbs:{boost:0}}};const p=[],m=new Mark(document.getElementById("content"));let f="",g=0;const y=()=>s===document.activeElement,w=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)},_=e=>{const t=document.createElement("a");return t.href=e,{source:e,protocol:t.protocol.replace(":",""),host:t.hostname,port:t.port,params:(()=>{const e={},s=t.search.replace(/^\?/,"").split("&");let r=0;for(;r<s.length;r++){if(!s[r])continue;const t=s[r].split("=");e[t[0]]=t[1]}return e})(),file:(t.pathname.match(/\/([^/?#]+)$/i)||[,""])[1],hash:t.hash.replace("#",""),path:t.pathname.replace(/^([^/])/,"/$1")}},v=e=>{let t=e.protocol+"://"+e.host;""!=e.port&&(t+=":"+e.port),t+=e.path;let s="?";for(const r in e.params)e.params.hasOwnProperty.call(r)&&(t+=s+r+"="+e.params[r],s="&");return""!=e.hash&&(t+="#"+e.hash),t},b=(()=>{const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},t=t=>e[t];return e=>e.replace(/[&<>'"]/g,t)})(),L=(e,t)=>{const s=E(b(e.doc.body),t);g++;const r=d[e.ref].split("#");1==r.length&&r.push("");const a=encodeURIComponent(t.join(" ")).replace(/\'/g,"%27");return'<a href="'+rootPath+r[0]+"?"+c+"="+a+"#"+r[1]+'" aria-details="teaser_'+g+'">'+e.doc.breadcrumbs+'</a><span class="teaser" id="teaser_'+g+'" aria-label="Search Result Teaser">'+s+"</span>"},E=(e,t)=>{const s=t.map((function(e){return elasticlunr.stemmer(e.toLowerCase())})),r=[],a=e.toLowerCase().split(". ");let o=0,n=0,l=!1;for(const e in a){const t=a[e].split(" ");n=8;for(const e in t){const a=t[e];if(a.length>0){for(const e in s)elasticlunr.stemmer(a).startsWith(s[e])&&(n=40,l=!0);r.push([a,n,o]),n=2}o+=a.length,o+=1}o+=1}if(0==r.length)return e;const c=[],i=Math.min(r.length,h.teaser_word_count);let d=0;for(let e=0;e<i;e++)d+=r[e][1];c.push(d);for(let e=0;e<r.length-i;e++)d-=r[e][1],d+=r[e+i][1],c.push(d);let u=0;if(l){let e=0;for(let t=c.length-1;t>=0;t--)c[t]>e&&(e=c[t],u=t)}else u=0;const p=[];let m=r[u][2];for(let t=u;t<u+i;t++){const s=r[t];m<s[2]&&(p.push(e.substring(m,s[2])),m=s[2]),40==s[1]&&p.push("<em>"),m=s[2]+s[0].length,p.push(e.substring(s[2],m)),40==s[1]&&p.push("</em>")}return p.join("")},C=e=>{h=e.results_options,u=e.search_options,d=e.doc_urls,i=elasticlunr.Index.load(e.index),n.addEventListener("click",(()=>{P()}),!1),s.addEventListener("keyup",(()=>{T()}),!1),document.addEventListener("keydown",(e=>{I(e)}),!1),window.onpopstate=()=>{x()},document.addEventListener("submit",(e=>{e.preventDefault()}),!1),x()},k=()=>{const e=document.createElement("input");e.setAttribute("style","position: absolute; opacity: 0;"),n.appendChild(e),e.focus(),e.remove()},x=()=>{const e=_(window.location.href);if(e.params.hasOwnProperty.call(l)&&""!=e.params[l]?(S(!0),s.value=decodeURIComponent((e.params[l]+"").replace(/\+/g,"%20")),T()):S(!1),e.params.hasOwnProperty.call(c)){m.mark(decodeURIComponent(e.params[c]).split(" "),{exclude:p});const t=document.querySelectorAll("mark"),s=()=>{for(let e=0;e<t.length;e++)t[e].classList.add("fade-out"),globalThis.setTimeout((()=>{m.unmark()}),300)};for(let e=0;e<t.length;e++)t[e].addEventListener("click",s)}},I=e=>{if(!(e.altKey||e.ctrlKey||e.metaKey||e.shiftKey)&&"textarea"!==e.target.type&&"text"!==e.target.type)if(27===e.keyCode)e.preventDefault(),s.classList.remove("active"),D("",""!==s.value.trim()?"push":"replace"),y()&&k(),S(!1),m.unmark();else if(y()||83!==e.keyCode){if(y()&&40===e.keyCode)e.preventDefault(),k(),r.firstElementChild.classList.add("focus");else if(!y()&&(40===e.keyCode||38===e.keyCode||13===e.keyCode)){const t=r.querySelector("li.focus");if(!t)return;if(e.preventDefault(),40===e.keyCode){const e=t.nextElementSibling;e&&(t.classList.remove("focus"),e.classList.add("focus"))}else if(38===e.keyCode){t.classList.remove("focus");const e=t.previousElementSibling;e?e.classList.add("focus"):s.select()}else window.location.assign(t.querySelector("a"))}}else e.preventDefault(),S(!0),window.scrollTo(0,0),s.select()},S=e=>{if(e)t.classList.remove("hidden"),n.setAttribute("aria-expanded","true");else{t.classList.add("hidden"),n.setAttribute("aria-expanded","false");const e=r.children;for(let t=0;t<e.length;t++)e[t].classList.remove("focus")}},B=e=>{e?a.classList.remove("hidden"):a.classList.add("hidden")},P=()=>{t.classList.contains("hidden")?(S(!0),window.scrollTo(0,0),s.select()):S(!1)},T=()=>{const e=s.value.trim();""!=e?(s.classList.add("active"),j(e)):(s.classList.remove("active"),B(!1),w(r)),D(e,"push_if_new_search_else_replace"),m.unmark()},D=(e,t)=>{const s=_(window.location.href),r=!s.params.hasOwnProperty.call(l);""!=e||"push_if_new_search_else_replace"==t?(s.params[l]=e,delete s.params[c],s.hash=""):(delete s.params[c],delete s.params[l]),"push"==t||"push_if_new_search_else_replace"==t&&r?history.pushState({},document.title,v(s)):("replace"==t||"push_if_new_search_else_replace"==t&&!r)&&history.replaceState({},document.title,v(s))},j=e=>{if(f==e)return;if(f=e,null==i)return;const t=i.search(e,u),s=Math.min(t.length,h.limit_results);o.innerText=((e,t)=>1==e?e+" search result for '"+t+"':":0==e?"No search results for '"+t+"'.":e+" search results for '"+t+"':")(s,e);const a=e.split(" ");w(r);for(let e=0;e<s;e++){const s=document.createElement("li");s.innerHTML=L(t[e],a),r.appendChild(s)}B(!0)};fetch(rootPath+"searchindex.json").then((e=>e.json())).then((e=>C(e))).catch((()=>{const e=document.createElement("script");e.src=rootPath+"searchindex.js",e.onload=()=>C(window.search),document.head.appendChild(e)})),e.hasFocus=y})(window.search);