"use strict";const main=()=>{const e="search",t="highlight",s=document.getElementById("searchbar"),r=document.getElementById("search-wrapper"),n=document.getElementById("searchresults"),o=document.getElementById("search-toggle");let a=[],c={teaser_word_count:30,limit_results:30},l={bool:"AND",expand:!0,fields:{title:{boost:1},body:{boost:1},breadcrumbs:{boost:0}}};const d=(e,s,r)=>{const n=a[s.ref].split("#");1==n.length&&n.push("");const o=e+1;return'<a href="'+document.getElementById("searcher").dataset.pathtoroot+n[0]+"?"+t+"="+encodeURIComponent(r.join(" ")).replace(/\'/g,"%27")+"#"+n[1]+'" aria-details="teaser_'+o+'">'+s.doc.breadcrumbs+'</a><span class="teaser" id="teaser_'+o+'" aria-label="Search Result Teaser">'+((e,t)=>{const s=[];let r=0,n=0,o=!1;if(e.toLowerCase().split(". ").forEach((e=>{const a=e.split(" ");r=8,a.forEach((e=>{e.length>0&&(t.map((e=>elasticlunr.stemmer(e.toLowerCase()))).forEach((t=>{elasticlunr.stemmer(e).startsWith(t)&&(r=40,o=!0)})),s.push([e,r,n]),r=2),n+=e.length,n+=1})),n+=1})),0==s.length)return e;const a=Math.min(s.length,c.teaser_word_count),l=(()=>{const e=[];let t=0;for(let e=0;e<a;e++)t+=s[e][1];e.push(t);for(let r=0;r<s.length-a;r++)t-=s[r][1],t+=s[r+a][1],e.push(t);return e})(),d=(()=>{if(!o)return 0;let e=0,t=0;for(let s=l.length-1;s>=0;s--)l[s]>e&&(e=l[s],t=s);return t})(),i=[];let h=s[d][2];const u=t=>{h=t[2]+t[0].length,i.push(e.substring(t[2],h))};for(let t=d;t<d+a;t++){const r=s[t];h<r[2]&&(i.push(e.substring(h,r[2])),h=r[2]),40==r[1]?(i.push("<em>"),u(r),i.push("</em>")):u(r)}return i.join("")})(s.doc.body,r)+"</span>"},i=()=>{r.classList.remove("hidden"),o.setAttribute("aria-expanded","true")},h=()=>{r.classList.add("hidden"),o.setAttribute("aria-expanded","false"),null!=n.length&&n.children.forEach((e=>e.classList.remove("focus")))},u=u=>{const m=new Mark(document.querySelector("main")),p=[];c=u.results_options,l=u.search_options,a=u.doc_urls,o.addEventListener("click",(()=>{r.classList.contains("hidden")?(i(),window.scrollTo(0,0),s.select()):h()}),{once:!1,passive:!0});const f=e=>{const t=document.createElement("a");return t.href=e,{source:e,protocol:t.protocol.replace(":",""),host:t.hostname,port:t.port,params:(()=>{const e={};return t.search.replace(/^\?/,"").split("&").forEach((t=>{if(t){const s=t.split("=");e[s[0]]=s[1]}})),e})(),file:(t.pathname.match(/\/([^/?#]+)$/i)||[,""])[1],hash:t.hash.replace("#",""),path:t.pathname.replace(/^([^/])/,"/$1")}},w=()=>{const r=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)},o=s.value.trim();""!=o?(s.classList.add("active"),(e=>{r(n);const t=elasticlunr.Index.load(u.index).search(e,l),s=Math.min(t.length,c.limit_results);document.getElementById("searchresults-header").innerText=(t.length>s?"Over ":"")+s+" search results for: "+e;const o=e.split(" ");for(let e=0;e<s;e++){const s=document.createElement("li");s.innerHTML=d(e,t[e],o),n.appendChild(s)}document.getElementById("searchresults-outer").classList.remove("hidden")})(o)):(s.classList.remove("active"),document.getElementById("searchresults-outer").classList.add("hidden"),r(n)),m.unmark();const a=f(window.location.href);delete a.params[t],""!=o?(a.params[e]=o,a.hash=""):delete a.params[e]};document.addEventListener("keyup",(e=>{if("Escape"!=e.key)return void w();h();const t=document.createElement("input");t.setAttribute("style","position: absolute; opacity: 0;"),o.appendChild(t),t.focus(),t.remove()}),{once:!1,passive:!0});const g=()=>{const r=f(window.location.href);r.params.hasOwnProperty.call(e)&&""!=r.params[e]?(i(),s.value=decodeURIComponent((r.params[e]+"").replace(/\+/g,"%20")),w()):h(),r.params.hasOwnProperty(t)&&(m.mark(decodeURIComponent(r.params[t]).split(" "),{exclude:p}),document.querySelectorAll("mark").forEach((e=>{e.addEventListener("click",m.unmark,{once:!0,passive:!0})})))};window.onpopstate=()=>g(),document.addEventListener("submit",(e=>{e.preventDefault()}),{once:!1,passive:!1}),g()},m=document.getElementById("searcher").dataset.pathtoroot+"searchindex";fetch(m+".json").then((e=>e.json())).then((e=>u(e))).catch((()=>{console.log("Try to load searchindex.js if fetch failed");const e=document.createElement("script");e.src=m+".js",e.onload=()=>u(search),document.head.appendChild(e)})),search.hasFocus=()=>s===document.activeElement},fzfInit=()=>{window.elasticlunr.Index.load=e=>{const t=window.fzf.Fzf,s=e.documentStore.docs,r=new t(Object.keys(s),{selector:e=>{const t=s[e];return t.text=`${t.title}${t.breadcrumbs}${t.body}`,t.text}});return{search:e=>r.find(e).map((e=>{const{item:t,score:r}=e;return{doc:s[t],ref:t,score:r}}))}}};Mark&&elasticlunr&&(window.search=window.search||{},document.addEventListener("DOMContentLoaded",(()=>{window.elasticlunr.Index.load=e=>{const t=window.fzf.Fzf,s=e.documentStore.docs,r=new t(Object.keys(s),{selector:e=>{const t=s[e];return t.text=`${t.title}${t.breadcrumbs}${t.body}`,t.text}});return{search:e=>r.find(e).map((e=>{const{item:t,score:r}=e;return{doc:s[t],ref:t,score:r}}))}},main()}),{once:!0,passive:!0}));